{% extends "base.html" %}
{% block title %}Edit Proyek{% endblock %}

{% block content %}
<div class="form-card" style="max-width: 800px; margin: 0 auto;">
    <h2 style="color: var(--primary-dark); border-bottom: 1px solid #eee; padding-bottom: 15px;">
        <i class="fas fa-edit"></i> Edit Proyek: {{ proyek.data.nama }}
    </h2>

    <form action="{{ url_for('edit_project', project_id=proyek.id) }}" method="POST" enctype="multipart/form-data">
        
        <div class="form-group">
            <label>Nama Proyek</label>
            <input type="text" name="nama_proyek" value="{{ proyek.data.nama }}" required>
        </div>

        <div class="form-group">
            <label>Kategori</label>
            <select name="kategori">
                <option value="Pemula" {% if proyek.data.kategori == 'Pemula' %}selected{% endif %}>Pemula</option>
                <option value="Sensor" {% if proyek.data.kategori == 'Sensor' %}selected{% endif %}>Sensor</option>
                <option value="Aktuator" {% if proyek.data.kategori == 'Aktuator' %}selected{% endif %}>Aktuator</option>
                <option value="IoT Lanjutan" {% if proyek.data.kategori == 'IoT Lanjutan' %}selected{% endif %}>IoT Lanjutan</option>
            </select>
        </div>

        <div class="form-group">
            <label>Deskripsi Singkat</label>
            <textarea name="deskripsi_singkat" rows="3" required>{{ proyek.data.deskripsi_singkat }}</textarea>
        </div>

        <div class="form-group">
            <label>Alat & Bahan</label>
            <textarea name="alat_bahan" rows="3">{{ proyek.data.alat_bahan }}</textarea>
        </div>

        <div class="form-group">
            <label>Ganti Gambar (Opsional)</label>
            <input type="file" name="image_file" accept="image/*">
            {% if proyek.data.image_url %}
                <p style="font-size: 12px; margin-top: 5px;">Gambar saat ini: <a href="{{ proyek.data.image_url }}" target="_blank" style="color: var(--primary-blue);">Lihat Gambar</a></p>
            {% endif %}
        </div>

        <div class="form-group">
            <label>Tutorial Lengkap (Markdown)</label>
            <textarea name="tutorial_lengkap" rows="6">{{ proyek.data.tutorial_lengkap }}</textarea>
        </div>

        <div class="form-group">
            <label>Source Code</label>
            <textarea name="source_code" rows="6" style="font-family: monospace; background: #2d2d2d; color: #eee;">{{ proyek.data.source_code }}</textarea>
        </div>

        <div style="margin-top: 20px;">
            <button type="submit" class="button"><i class="fas fa-save"></i> Simpan Perubahan</button>
            <a href="{{ url_for('admin_dashboard') }}" class="button button-secondary">Batal</a>
        </div>
    </form>
</div>
{% endblock %}